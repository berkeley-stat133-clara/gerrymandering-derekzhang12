---
title: "Practice Worksheet: Gerrymandering"
format: typst
---

Recall the 3 quantitative approaches to measuring gerrymandering discussed in lecture:\
1. Mean - Median Score (Grofman, 1983)\
2. Efficiency Gap (Stephanopolous and McGee, 2015)\
3. Ensembles / Extreme Outliers\
Use the following table to practice applying the first two techniques.\

| District | D Votes | R Votes | Result  |
|:---------:|:-------:|:-------:|:--------|
| 1 | 62 | 38 | D wins |
| 2 | 55 | 45 | D wins |
| 3 | 44 | 56 | R wins |
| 4 | 47 | 53 | R wins |
| 5 | 46 | 54 | R wins |
| **Total** | **254** | **246** |          |

```{r}
#| message: false
#| echo: false
library(tidyverse)
votes <- tibble(District = 1:5,
                d_votes = c(62, 55, 44, 47, 46),
                r_votes = c(38, 45, 56, 53, 54),
                result = c(rep("D wins", 2), rep("R wins", 3)))
```

### Q1. Mean-Median Scores

Calculate the mean-median score associated with this particular district breakdown of votes.

```{r}
# add code for Q1 here
votes |>
    mutate(v_i = r_votes / ( r_votes + d_votes)) |>
    summarize(mean_v = mean(v_i),
            med_v = median(v_i)) |>
                mutate(mm = mean_v - med_v)
    #-0.0380
```

### Q2. Efficiency Gap

Calculate the Efficiency Gap (EG) associated with this particular district breakdown of votes.

*Tip*: it may be helpful to write a function that takes a vector of votes across districts for party A and vector of votes for the party B and returns a vector of the number votes wasted by party A across districts.


```{r}
# add code for Q2 here
need <- 51

out <- votes |>
  mutate(
    wasted_D = case_when(
      d_votes >= need ~ d_votes - need,  # if D wins: extra beyond needed
      d_votes < need  ~ d_votes          # if D loses: all D votes wasted
    ),
    wasted_R = case_when(
      r_votes >= need ~ r_votes - need,
      r_votes < need  ~ r_votes
    )
  )
totals <- out |>
  summarise(
    total_D = sum(d_votes),
    total_R = sum(r_votes),
    wasted_D = sum(wasted_D),
    wasted_R = sum(wasted_R),
    efficiency_gap = (wasted_D - wasted_R) / sum(d_votes + r_votes)
  )

totals
```